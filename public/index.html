<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" href="css/dashboard.css">

    <title>Project Dashboard</title>
  </head>
  <body>
    <div id="dashboard" class="container-fluid">
    <h1>{{name}}</h1>

    <p> {{short_description}} </p>

    <div class="row"> <!-- start row 1 -->

      <div class="col placeholder">
        Completion %
      </div>

      <section class="col">
        <div class="row" id ="duedate">
          <div class="col">
            <h2>Due Date</h2>
            <div class="ban">{{pretty_target_date}}</div>
          </div>
        <div class="col">
          <h2>Remaining</h2>
          <div class="ban">{{days_left}} days</div>
        </div>
      </div>
    </section>

      <div class="col placeholder">
        Status
      </div>

    </div> <!-- end row 1, high-level summary information -->

    <div class="row"> <!--start row 2 -->

      <section class="col" style="height:200px" id ="spent">
        <h2>Spent</h2>
        <div class="ban">{{pretty_currency(spent)}}</div>
        <h2>Budget</h2>
        <div class="ban">{{pretty_currency(budget)}}</div>
        <h2>Projected Spend</h2>
        <div class="ban">{{pretty_currency(projected_spend)}}</div>
      </section>
      <div class="col placeholder">
        Burndown Chart goes here.
      </div>
      <div class="col placeholder">
        Effort Chart goes here.
      </div>
    </div> <!-- end row 2, 3 charts -->

    <br>

    <div class="row">
      <table id="taskTable" class="table table-bordered table-striped table-sm table-hover">
        <thead class= "thead-dark">
          <tr>
            <th> Task </th>
            <th> Type </th>
            <th> Size </th>
            <th> Assigned Team</th>
            <th> Status </th>
            <th> Started </th>
            <th> Finished </th>
            <th> Hours </th>
            <th> % Complete </th>
            <th> Current Sprint? </th>
        </tr>
        </thead>
        <tbody>
          <tr v-for="task in tasks"
              :key="task.id"
              :id="task.id"
              :class="task.current_sprint ? 'current-sprint' : '' "
              @click="gotoTask(task.id)">
            <td> {{task.title}}</td>
            <td> {{task.type}}</td>
            <td> {{task.size}} </td>
            <td> {{task.team}}</td>
            <td> {{task.status}}</td>
            <td> {{task.start_date}}</td>
            <td> {{task.close_date}} </td>
            <td> {{task.hours_worked}} </td>
            <td :class="completedClass(task)"> {{task.perc_complete}} </td>
            <td> {{task.current_sprint}}</td>
          </tr>
        </tbody>
      </table>
    </div> <!-- end row 3, tabular data -->

    <div class="row">
      <button v-on:click="alert('foo')">Click Me!</button>
    </div>


  </div>

  <!-- moment.js CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment.min.js"></script>
  <!-- development version, includes helpful console warnings -->
  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  <script src="js/dashboard.app.js"></script>

  <script src="js/tablesort.min.js"></script>
  <script>
  // Tablesort plugin from http://tristen.ca/tablesort/demo/
  new Tablesort(document.getElementById('taskTable'));
  </script>

  </body>
</html>
